<div class="friend-container">
    <p class="subtitle text-center mb-2">Friends</p>
    <div>
        @{
            var firstId = _friends.FirstOrDefault()?.Id;
            var lastId = _friends.LastOrDefault()?.Id;
            
            
            <Virtualize Items="@_friends">
                @{
                    string classList = "";

                    if (context.Id == firstId)
                        classList += " top";

                    if (context.Id == lastId)
                        classList += " bottom";

                    <FriendComponent User="@context" PositionClass="@classList" @key="context.Id"></FriendComponent>
                }
            </Virtualize>
        }
    </div>
</div>

@code {

    private List<User> _friends;
    
    protected override async Task OnInitializedAsync()
    {
        _friends = ValourClient.Friends;
        ValourClient.OnFriendsUpdate += OnFriendsListUpdate;
        await base.OnInitializedAsync();
    }

    public async Task OnFriendsListUpdate()
    {
        _friends = ValourClient.Friends;
        StateHasChanged();
    }
}