@inject IJSRuntime JS

<img @ref="_imageRef" class="@GetCssClass() attached-image" @onclick="OnClick" />

@code {
    private bool enlarged = false;

    [Parameter]
    public MessageAttachment Attachment { get; set; }

    [Parameter]
    public MessageComponent MessageComponent { get; set; }

    private ElementReference _imageRef;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        //if (firstRender && MessageComponent is not null)
        //    await JS.InvokeVoidAsync("loadChannelImage", _imageRef, Attachment.Location, MessageComponent.Window.Id);
    }

    public string GetCssClass()
    {
        if (enlarged)
            return "enlarged";
        else
            return "";
    }

    public void OnClick()
    {
        enlarged = !enlarged;
        StateHasChanged();
    }
}
